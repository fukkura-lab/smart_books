# Smart Books / 財Tech

AIチャットによる税務相談をベースにした使いやすい会計ソフトウェアです。画像やCSV、PDF、音声入力などの自動解析・仕分け機能や、ふるさと納税の推薦など、多機能な会計支援を提供します。

## 主な機能

1. **AIスマート会計**
   - 領収書・請求書の写真をAIが自動認識してデータ化、仕訳
   - リアルタイムでの損益計算と簡易試算表の作成
   - 音声認識による取引入力機能

2. **税務最適化**
   - AIによる税金試算と節税アドバイス
   - 確定申告サポート機能

3. **従業員管理**
   - 給与計算と勤怠管理
   - 多言語対応の従業員インターフェース

4. **24時間サポート**
   - AIチャットボットによる24時間財務アドバイス

5. **業種別カスタマイズ**
   - 飲食業、小売業、サービス業など、各業種に最適化されたインターフェース

## セットアップ手順

### 前提条件
- Flutter SDK 3.0.0以上
- Dart 3.0.0以上
- OpenAI APIキー（AIチャット機能を使用する場合）

### インストール

1. リポジトリをクローン
```bash
git clone https://github.com/your-username/smart_books.git
cd smart_books
```

2. 依存関係のインストール
```bash
flutter pub get
```

3. 環境変数の設定
`.env.example`ファイルを`.env`にコピーし、必要な値を設定します：
```bash
cp .env.example .env
# その後、.envファイルを編集してAPIキーやデータベース接続情報を追加
```

**注意**: `.env`ファイルには秘密情報が含まれるため、Gitにコミットしないでください。

4. アプリケーションの実行
```bash
flutter run
```

## 設定ファイルの準備（必須）

このアプリケーションを正しく動作させるには、以下の設定が必要です：

1. **OpenAI APIキーの取得**
   - [OpenAI](https://platform.openai.com/)でアカウントを作成し、APIキーを取得します

2. **データベース接続情報の設定**
   - PostgreSQLデータベースを設定し、接続文字列を取得します

3. **環境変数ファイルの設定**
   - `.env.example`ファイルを`.env`にコピーします
   - `.env`ファイルを編集し、必要な情報を入力します

```
# .envファイルの例
OPENAI_API_KEY=your_api_key_here
OPENAI_MODEL=gpt-4o-mini
DB_CONNECTION_STRING=your_database_connection_string_here
```

**重要**: `.env`ファイルには機密情報が含まれるため、バージョン管理システムにコミットしないでください。

## 使い方

### チャットによる税務相談
アプリのメイン画面では、AIチャットボットに会計や税務に関する質問をすることができます。例えば：
- 「確定申告について教えて」
- 「経費として計上できるものは？」
- 「ふるさと納税の上限額は？」

### 領収書の自動解析
1. チャット画面下部のカメラアイコンをタップ
2. 領収書や請求書を撮影またはアップロード
3. AIが自動的に内容を解析し、経費として登録

### データの確認
「収支」タブでは、登録された取引データを確認できます。月別・カテゴリ別の集計や、グラフによる可視化も可能です。

## カスタマイズ

### テーマカラーの変更
`lib/config/theme.dart`ファイルを編集することで、アプリのカラーテーマをカスタマイズできます。

### プロンプト設定の調整
`lib/services/ai_service.dart`ファイル内の`_formatMessagesForAPI`メソッドを編集することで、AIチャットの応答特性を調整できます。

## 開発情報

このプロジェクトは以下の技術を使用しています：
- Flutter & Dart: UIフレームワーク
- flutter_bloc: 状態管理
- OpenAI API: AIチャット機能
- Google ML Kit: 画像認識・テキスト抽出
- PostgreSQL: データベース

## ライセンス

このプロジェクトは[MITライセンス](LICENSE)の下で公開されています。

## 貢献

バグ報告や機能リクエストは、Issueセクションでお願いします。プルリクエストも歓迎します。